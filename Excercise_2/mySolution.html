<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- Integrating Bootstrap above for easy formatting -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#avg_button').click(function () {
                var sum = 0, count = 0, result;
                // now loop through each text input, adding to our sum if we have a value.
                $('input[type="number"]').each(function () {
                    var val = Number($(this).val());
                    if (val) {
                        sum += Number(val);
                        count++;
                    }
                });
                result = (count > 0) ? sum / count : 'no values found';
                //prepend words to result to differentiate the answers
                $('#avg_result').html(`<h2>Average: ${result} </h2>`);
            });

            // helper function to get the mean of an array of numbers (i.e. numbers inputted by the end-user)
            const calculateMean = (values) => {
                if (values.length === 0) return 0;  //account for errors
                const mean = (values.reduce((sum, current) => sum + current)) / values.length;
                return mean;
            };

            $('#var_button').click(function () {
                //function for getting the variance; the average of the squared distance from the mean
                let count = 0;
                let numArr = [];
                let variance;
                $('input[type="number"]').each(function () {
                    var val = Number($(this).val());
                    if (val) {
                        numArr.push(val); //push the values into an array for processing
                        count++;
                    }
                    const mean = calculateMean(numArr); //first we must calculate the mean
                    const squareDiffs = numArr.map((value) => {//then we must square the differences
                        const diff = value - mean;
                        return diff * diff;
                    });
                    //then we must calculate the mean of the squared differences
                    variance = calculateMean(squareDiffs);
                    return variance;
                });
                result = (count > 0) ? variance : 'no values found';
                $('#var_result').html(`<h2>Variance: ${result} </h2>`);
            });



        });
    </script>
</head>

<body>
    <main class="text-center mt-5 h4">
        <!-- ^small formatting implementation for readability/accessibility -->
        Enter numbers to get the average and/or variance:
        <br />1. <input type="number" size="10" class="mt-2" />
        <br />2. <input type="number" size="10" />
        <br />3. <input type="number" size="10" />
        <br />4. <input type="number" size="10" />
        <br />5. <input type="number" size="10" />
        <br />6. <input type="number" size="10" />
        <br />7. <input type="number" size="10" />
        <br />8. <input type="number" size="10" />
        <br />9. <input type="number" size="10" />
        <br />10. <input type="number" size="10" />
        <hr />
        <input type="button" value="Calculate the Average" id="avg_button" />
        <input type="button" value="Calculate the Variance" id="var_button" />
        <div id="avg_result"></div>
        <div id="var_result"></div>
    </main>
</body>

</html>